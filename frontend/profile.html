<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="assets/js/auth-guard.js"></script>
  <title>Health Dashboard â€“ MedConnect</title>
  <meta name="description" content="View and manage your MedConnect health profile in a secure dashboard." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <!-- Header copied from home.html -->
  <header class="site-header" role="banner">
    <div class="container header-inner">
      <a class="brand" href="home.html" aria-label="MedConnect home">
        <span class="logo" aria-hidden="true">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="5" fill="var(--primary-600)"/>
            <path d="M12 7v10M7 12h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </span>
        <span class="brand-text">MedConnect</span>
      </a>
      <nav class="primary-nav" aria-label="Primary">
        <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu">â˜°</button>
        <ul id="nav-menu" class="nav-menu">
          <li><a href="home.html#catalog">Shop</a></li>
          <li><a href="orders.html">My Orders</a></li>
          <li><a href="services.html#blog">Health Blog</a></li>
        </ul>
      </nav>
      <div id="authControls" class="auth-controls">
        <a class="btn btn-ghost" href="login.html">Login</a>
        <a class="btn btn-secondary" href="signup.html">Sign Up</a>
      </div>
      <button id="cartBtn" class="btn btn-ghost" aria-label="Open cart">
        ðŸ›’ <span id="cartCount" class="badge">0</span>
      </button>
    </div>
  </header>

  <main class="container profile-page">
    <div class="page-head">
      <h1 class="section-title">Health Dashboard</h1>
      <p class="section-sub">All information is read-only until you verify your password.</p>
    </div>

    <div class="profile-stack">
      <!-- Personal info card -->
      <section class="card profile-card" aria-labelledby="profileInfoTitle">
        <div class="profile-card-header">
          <div id="avatar" class="avatar">U</div>
          <div>
            <div id="displayName" class="profile-name">User</div>
            <div id="displayEmail" class="profile-email">user@example.com</div>
          </div>
        </div>
        <hr />
        <form id="profileForm" class="form" novalidate>
          <h2 id="profileInfoTitle" class="card-title">Personal Information</h2>

          <div class="form-grid form-grid-4">
            <div class="form-row">
              <label for="name">Full Name</label>
              <input type="text" id="name" placeholder="Your full name" required disabled />
            </div>
            <div class="form-row">
              <label for="email">Email</label>
              <input type="email" id="email" placeholder="name@example.com" disabled />
            </div>
            <div class="form-row">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" placeholder="+201234567890" disabled />
            </div>
            <div class="form-row">
              <label for="dob">Date of Birth</label>
              <input type="text" id="dob" placeholder="dd/mm/yyyy" disabled />
            </div>
          </div>

          <div class="form-grid form-grid-4">
            <div class="form-row">
              <label for="height">Height (cm)</label>
              <input type="number" id="height" placeholder="170" step="0.1" min="0" disabled />
            </div>
            <div class="form-row">
              <label for="weight">Weight (kg)</label>
              <input type="number" id="weight" placeholder="70" step="0.1" min="0" disabled />
            </div>
            <div class="form-row">
              <label for="bloodType">Blood Type</label>
              <select id="bloodType" disabled>
                <option value="">Select blood type</option>
                <option>A+</option><option>A-</option><option>B+</option><option>B-</option>
                <option>AB+</option><option>AB-</option><option>O+</option><option>O-</option>
              </select>
            </div>
            <div class="form-row">
              <label for="gender">Gender</label>
              <select id="gender" disabled>
                <option value="">Select gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <label for="address">Full Address</label>
            <textarea id="address" rows="2" placeholder="Street, City, Country" disabled></textarea>
          </div>
          <div class="form-row">
            <label for="allergies">Allergies & Conditions</label>
            <textarea id="allergies" rows="3" placeholder="Allergies, chronic conditions, or medications" disabled></textarea>
          </div>

          <div class="card-actions card-actions-end">
            <div class="action-row">
              <button class="btn" id="editBtn" type="button">Edit Profile</button>
              <button class="btn" id="saveBtn" type="submit" style="display: none;">Save Changes</button>
              <button class="btn btn-ghost" id="cancelBtn" type="button" style="display: none;">Cancel</button>
            </div>
          </div>
          <div id="profileMsg" class="profile-message"></div>
        </form>
      </section>

      <!-- Health widgets -->
      <div class="health-row">
        <section class="card health-card summary-card" aria-live="polite">
          <h3>Health Summary</h3>
          <div class="summary-rows">
            <div class="summary-row">
              <span>Blood Type</span>
              <strong id="summaryBloodType">--</strong>
            </div>
            <div class="summary-row">
              <span>Age</span>
              <strong id="summaryAge">--</strong>
            </div>
            <div class="summary-row">
              <span>Gender</span>
              <strong id="summaryGender">--</strong>
            </div>
            <div class="summary-row">
              <span>Height</span>
              <strong id="summaryHeight">--</strong>
            </div>
            <div class="summary-row">
              <span>Weight</span>
              <strong id="summaryWeight">--</strong>
            </div>
          </div>
        </section>

        <section class="card health-card bmi-card" aria-live="polite">
          <div class="bmi-header">
            <h3>BMI Calculator</h3>
            <span class="bmi-unit">kg/mÂ²</span>
          </div>
          <div class="bmi-score-block">
            <div id="bmiValue" class="bmi-value">--</div>
            <div id="bmiLabel" class="bmi-label">Enter weight and height to see your BMI.</div>
          </div>
          <div class="bmi-scale">
            <div class="bmi-scale-track">
              <div class="bmi-scale-fill" id="bmiScaleFill"></div>
              <div class="bmi-marker" id="bmiMarker"></div>
            </div>
            <div class="bmi-scale-labels">
              <div>
                <span>Underweight</span>
                <strong>&lt; 18.5</strong>
              </div>
              <div>
                <span>Healthy</span>
                <strong>18.5 â€“ 24.9</strong>
              </div>
              <div>
                <span>Overweight</span>
                <strong>25 â€“ 29.9</strong>
              </div>
              <div>
                <span>Obesity</span>
                <strong>30+</strong>
              </div>
            </div>
          </div>
          <p class="bmi-tip">Healthy BMI range is 18.5 â€“ 24.9.</p>
        </section>
      </div>
    </div>
  </main>

  <!-- Password verification modal -->
  <div id="pwdModal" class="pwd-modal" role="dialog" aria-modal="true" aria-labelledby="pwdModalTitle" style="display:none;">
    <div class="card pwd-modal-inner">
      <h2 id="pwdModalTitle" class="card-title">Verify Password</h2>
      <p class="pwd-modal-text">We need to confirm it is you before enabling editing.</p>
      <div class="form-row">
        <label for="pwdInput">Password</label>
        <input type="password" id="pwdInput" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
      </div>
      <div id="pwdErr" class="pwd-error" style="display:none;"></div>
      <div class="card-actions pwd-actions">
        <button class="btn btn-ghost" id="pwdCancel" type="button">Cancel</button>
        <button class="btn" id="pwdConfirm" type="button">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Footer copied from home.html -->
  <footer class="site-footer" role="contentinfo">
    <div class="container footer-inner">
      <div class="footer-brand">
        <span class="logo" aria-hidden="true">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="5" fill="var(--primary-600)"/>
            <path d="M12 7v10M7 12h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </span>
        <span class="brand-text">MedConnect</span>
        <p class="footer-tag">Accessible. Affordable. Trusted.</p>
      </div>
      <div class="footer-links">
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
        <a href="#">Contact</a>
      </div>
      <div class="footer-copy">Â© <span id="year"></span> MedConnect. All rights reserved.</div>
    </div>
  </footer>

  <!-- Cart Drawer -->
  <aside id="cartDrawer" class="cart-drawer" aria-hidden="true" aria-label="Shopping cart drawer">
    <div class="cart-header">
      <h3>Cart</h3>
      <button id="closeCartBtn" class="btn btn-ghost" aria-label="Close cart">âœ•</button>
    </div>
    <div id="cartItems" class="cart-items"></div>
    <div class="cart-footer">
      <div class="cart-total">Total: <strong id="cartTotal">EGP 0.00</strong></div>
      <button class="btn btn-primary" id="checkoutBtn">Checkout</button>
    </div>
  </aside>
  <div id="backdrop" class="backdrop" hidden></div>

  <script src="assets/js/auth.js" defer></script>
  <script src="assets/js/main.js" defer></script>
  <script src="assets/js/profile.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
